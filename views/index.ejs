<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Laca Scam List</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=UnifrakturCook:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <section class="header">
      <nav class="navbar">
        <h1 class="header_title">Laca Scam List</h1>
        <ul>
          <li class="navbar_element"><a href="/newscam">Add Scam</a></li>
        </ul>
      </nav>
    </section>
    <section class="main">
      <main>
        <div class="achievement" id="achievement">
          <img src="img/scamchievement.png" alt="Scam Ahievement Popup" />
          <span class="ac_title"><%= id_len %> scams achieved!</span>
        </div>
        <div class="scam_list">
          <% scams.forEach((scam) => { %>
          <div class="scam_item">
            <form action="/deleteScam" method="post">
              <button
                class="deleteScam"
                type="submit"
                name="deleteItemId"
                value="<%= scam.id %>"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
            </form>

            <h2 class="scam_name"><%= scam.scam_name %></h2>
            <span class="scam_description"><%= scam.scam_description %></span>
            <span class="scam_time"><%= scam.scam_time %></span>
          </div>
          <% }) %>
        </div>
        <div class="prog">
          <h3 class="progress_title">
            <a href="/achievements"
              >Scam-o-meter (click for achievement list)</a
            >
          </h3>
          <div class="progressbar" id="progressbar">
            <span class="progress" id="progress"></span>
          </div>
        </div>
      </main>
    </section>
    <footer><%= new Date().getFullYear() %> &copy; Varga DÃ¡niel</footer>

    <script>
      const progress = document.getElementById("progress");
      const progress_len = <%= progressLength %>;

      if (progress_len > 100 && progress_len % 100 != 0) {
        progress.style.width = <%= reset %> + "%";
      } else {
        progress.style.width = progress_len + "%";
      }

      const achievementsNumber = <%= id_len %>;
      const achievementPopUp = document.getElementById("achievement");
      if (achievementsNumber % 10 === 0) {
        achievementPopUp.style.right = "15px"
        setTimeout(() => {
          achievementPopUp.style.right = "-1000px"
        }, 3000)
      }
    </script>
  </body>
</html>
